<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baseball Scorekeeper</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c5f2d 0%, #97bc62 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .scoreboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            background: #f5f5f5;
        }

        .team-score {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .team-score.home {
            border-left: 5px solid #c41e3a;
        }

        .team-score.visitor {
            border-left: 5px solid #003366;
        }

        .team-name {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .team-name-input {
            width: 100%;
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            background: transparent;
            border: 2px solid transparent;
            padding: 5px 10px;
            border-radius: 5px;
            text-align: center;
            transition: all 0.3s;
        }

        .team-name-input:hover {
            border-color: #ddd;
            background: rgba(255,255,255,0.5);
        }

        .team-name-input:focus {
            outline: none;
            border-color: #4CAF50;
            background: white;
        }

        .score-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }

        .score-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-add {
            background: #4CAF50;
            color: white;
        }

        .btn-add:hover {
            background: #45a049;
        }

        .btn-subtract {
            background: #f44336;
            color: white;
        }

        .btn-subtract:hover {
            background: #da190b;
        }

        .game-status {
            padding: 20px;
            background: white;
        }

        .status-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .status-item {
            text-align: center;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border: 2px solid #ddd;
        }

        .status-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .status-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 5px;
            border: 2px solid #333;
        }

        .indicator.active {
            background: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .inning-display {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            padding: 10px;
            background: #333;
            color: white;
            margin-bottom: 20px;
        }

        .lineup-section {
            padding: 20px;
            background: white;
        }

        .lineup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .lineup-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .lineup-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .team-lineup {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
        }

        .lineup-team-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 15px;
            padding: 10px;
            background: #333;
            color: white;
            border-radius: 5px;
            text-align: center;
        }

        .player-row {
            display: grid;
            grid-template-columns: 30px 30px 1fr 80px 50px;
            gap: 8px;
            margin-bottom: 10px;
            align-items: center;
            background: white;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .player-row:hover {
            background: #f0f0f0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .player-row.dragging {
            opacity: 0.5;
            background: #e3f2fd;
        }

        .player-row.drag-over {
            border-top: 3px solid #4CAF50;
        }

        .drag-handle {
            font-size: 1em;
            color: #999;
            cursor: grab;
            text-align: center;
            user-select: none;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        .player-number {
            font-weight: bold;
            text-align: center;
            padding: 4px;
            background: #333;
            color: white;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .btn-delete-player {
            background: #f44336;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-delete-player:hover {
            background: #da190b;
            transform: scale(1.05);
        }

        .btn-add-player {
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            font-size: 0.95em;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            transition: all 0.3s;
        }

        .btn-add-player:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .player-name-input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }

        .position-select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .control-panel {
            padding: 20px;
            background: #f0f0f0;
            border-top: 2px solid #ddd;
        }

        .control-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .btn-control {
            padding: 12px 20px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-control:hover {
            background: #0b7dda;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-reset {
            background: #ff9800;
        }

        .btn-reset:hover {
            background: #e68900;
        }

        .current-batter {
            background: #fff3cd !important;
            border: 2px solid #ffc107 !important;
        }

        @media (max-width: 768px) {
            .scoreboard {
                grid-template-columns: 1fr;
            }

            .status-row {
                grid-template-columns: 1fr;
            }

            .lineup-grid {
                grid-template-columns: 1fr;
            }

            .player-row {
                grid-template-columns: 25px 25px 1fr 70px 40px;
                gap: 6px;
            }

            .player-number {
                font-size: 0.8em;
                padding: 3px;
            }

            .btn-delete-player {
                font-size: 0.75em;
                padding: 3px 6px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¾ Baseball Scorekeeper</h1>
            <p>Track your game in real-time</p>
        </div>

        <div class="inning-display" id="inningDisplay">
            Inning 1 - Top
        </div>

        <div class="scoreboard">
            <div class="team-score visitor">
                <input type="text" class="team-name-input" id="visitorTeamName" value="Visitor" onchange="updateTeamName('visitor', this.value)">
                <div class="score-display" id="visitorScore">0</div>
                <div class="score-controls">
                    <button class="btn btn-add" onclick="adjustScore('visitor', 1)">+1</button>
                    <button class="btn btn-subtract" onclick="adjustScore('visitor', -1)">-1</button>
                </div>
            </div>

            <div class="team-score home">
                <input type="text" class="team-name-input" id="homeTeamName" value="Home" onchange="updateTeamName('home', this.value)">
                <div class="score-display" id="homeScore">0</div>
                <div class="score-controls">
                    <button class="btn btn-add" onclick="adjustScore('home', 1)">+1</button>
                    <button class="btn btn-subtract" onclick="adjustScore('home', -1)">-1</button>
                </div>
            </div>
        </div>

        <div class="game-status">
            <div class="status-row">
                <div class="status-item">
                    <div class="status-label">Outs</div>
                    <div id="outsIndicators">
                        <span class="indicator" id="out1"></span>
                        <span class="indicator" id="out2"></span>
                        <span class="indicator" id="out3"></span>
                    </div>
                    <div class="status-value" id="outsCount">0</div>
                </div>

                <div class="status-item">
                    <div class="status-label">Strikes</div>
                    <div id="strikesIndicators">
                        <span class="indicator" id="strike1"></span>
                        <span class="indicator" id="strike2"></span>
                        <span class="indicator" id="strike3"></span>
                    </div>
                    <div class="status-value" id="strikesCount">0</div>
                </div>

                <div class="status-item">
                    <div class="status-label">Balls</div>
                    <div id="ballsIndicators">
                        <span class="indicator" id="ball1"></span>
                        <span class="indicator" id="ball2"></span>
                        <span class="indicator" id="ball3"></span>
                        <span class="indicator" id="ball4"></span>
                    </div>
                    <div class="status-value" id="ballsCount">0</div>
                </div>
            </div>
        </div>

        <div class="lineup-section">
            <div class="lineup-header">
                <div class="lineup-title">ðŸ“‹ Team Lineups & Positions</div>
            </div>
            <div class="lineup-grid">
                <div class="team-lineup">
                    <div class="lineup-team-title" id="visitorLineupTitle">Visitor Lineup</div>
                    <div id="visitorLineup"></div>
                </div>
                <div class="team-lineup">
                    <div class="lineup-team-title" id="homeLineupTitle">Home Lineup</div>
                    <div id="homeLineup"></div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <div class="control-buttons">
                <button class="btn-control" onclick="addStrike()">Strike</button>
                <button class="btn-control" onclick="addBall()">Ball</button>
                <button class="btn-control" onclick="addOut()">Out</button>
                <button class="btn-control" onclick="nextBatter()">Next Batter</button>
                <button class="btn-control" onclick="changeInning()">Change Inning</button>
                <button class="btn-control btn-reset" onclick="resetCount()">Reset Count</button>
                <button class="btn-control btn-reset" onclick="resetGame()">New Game</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameState = {
            homeScore: 0,
            visitorScore: 0,
            outs: 0,
            strikes: 0,
            balls: 0,
            inning: 1,
            isTop: true,
            currentBatter: {
                home: 0,
                visitor: 0
            },
            homeLineup: [],
            visitorLineup: [],
            teamNames: {
                home: 'Home',
                visitor: 'Visitor'
            }
        };

        const positions = ['P', 'C', '1B', '2B', '3B', 'SS', 'LF', 'CF', 'RF', 'DH'];

        let draggedElement = null;
        let draggedTeam = null;
        let draggedIndex = null;

        // Initialize lineups
        function initializeLineups() {
            for (let i = 0; i < 9; i++) {
                gameState.homeLineup.push({
                    name: `Player ${i + 1}`,
                    position: positions[i] || 'P'
                });
                gameState.visitorLineup.push({
                    name: `Player ${i + 1}`,
                    position: positions[i] || 'P'
                });
            }
            renderLineups();
            updateLineupTitles();
        }

        // Update team name
        function updateTeamName(team, name) {
            gameState.teamNames[team] = name || (team === 'home' ? 'Home' : 'Visitor');
            updateLineupTitles();
        }

        // Update lineup titles
        function updateLineupTitles() {
            document.getElementById('homeLineupTitle').textContent = `${gameState.teamNames.home} Lineup`;
            document.getElementById('visitorLineupTitle').textContent = `${gameState.teamNames.visitor} Lineup`;
        }

        // Render lineups
        function renderLineups() {
            const homeLineupDiv = document.getElementById('homeLineup');
            const visitorLineupDiv = document.getElementById('visitorLineup');

            homeLineupDiv.innerHTML = '';
            visitorLineupDiv.innerHTML = '';

            gameState.homeLineup.forEach((player, index) => {
                const row = createPlayerRow(index, player, 'home');
                homeLineupDiv.appendChild(row);
            });

            // Add "Add Player" button for home team
            const homeAddBtn = document.createElement('button');
            homeAddBtn.className = 'btn-add-player';
            homeAddBtn.textContent = '+ Add Player';
            homeAddBtn.onclick = () => addPlayer('home');
            homeLineupDiv.appendChild(homeAddBtn);

            gameState.visitorLineup.forEach((player, index) => {
                const row = createPlayerRow(index, player, 'visitor');
                visitorLineupDiv.appendChild(row);
            });

            // Add "Add Player" button for visitor team
            const visitorAddBtn = document.createElement('button');
            visitorAddBtn.className = 'btn-add-player';
            visitorAddBtn.textContent = '+ Add Player';
            visitorAddBtn.onclick = () => addPlayer('visitor');
            visitorLineupDiv.appendChild(visitorAddBtn);

            updateCurrentBatter();
        }

        // Create player row
        function createPlayerRow(index, player, team) {
            const row = document.createElement('div');
            row.className = 'player-row';
            row.id = `${team}-batter-${index}`;
            row.draggable = true;
            row.dataset.team = team;
            row.dataset.index = index;

            // Drag events
            row.addEventListener('dragstart', handleDragStart);
            row.addEventListener('dragover', handleDragOver);
            row.addEventListener('drop', handleDrop);
            row.addEventListener('dragend', handleDragEnd);
            row.addEventListener('dragenter', handleDragEnter);
            row.addEventListener('dragleave', handleDragLeave);

            const dragHandle = document.createElement('div');
            dragHandle.className = 'drag-handle';
            dragHandle.innerHTML = 'â‹®â‹®';
            dragHandle.title = 'Drag to reorder';

            const number = document.createElement('div');
            number.className = 'player-number';
            number.textContent = index + 1;

            const nameInput = document.createElement('input');
            nameInput.type = 'text';
            nameInput.className = 'player-name-input';
            nameInput.value = player.name;
            nameInput.onchange = (e) => updatePlayerName(team, index, e.target.value);
            // Prevent dragging when interacting with input
            nameInput.addEventListener('mousedown', (e) => e.stopPropagation());

            const positionSelect = document.createElement('select');
            positionSelect.className = 'position-select';
            positions.forEach(pos => {
                const option = document.createElement('option');
                option.value = pos;
                option.textContent = pos;
                if (pos === player.position) option.selected = true;
                positionSelect.appendChild(option);
            });
            positionSelect.onchange = (e) => updatePlayerPosition(team, index, e.target.value);
            // Prevent dragging when interacting with select
            positionSelect.addEventListener('mousedown', (e) => e.stopPropagation());

            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'btn-delete-player';
            deleteBtn.textContent = 'ðŸ—‘ï¸';
            deleteBtn.title = 'Delete player';
            deleteBtn.onclick = (e) => {
                e.stopPropagation();
                e.preventDefault();
                deletePlayer(team, index);
            };
            // Prevent dragging when clicking delete button
            deleteBtn.addEventListener('mousedown', (e) => e.stopPropagation());
            deleteBtn.addEventListener('dragstart', (e) => e.preventDefault());

            row.appendChild(dragHandle);
            row.appendChild(number);
            row.appendChild(nameInput);
            row.appendChild(positionSelect);
            row.appendChild(deleteBtn);

            return row;
        }

        // Update player name
        function updatePlayerName(team, index, name) {
            if (team === 'home') {
                gameState.homeLineup[index].name = name;
            } else {
                gameState.visitorLineup[index].name = name;
            }
        }

        // Update player position
        function updatePlayerPosition(team, index, position) {
            if (team === 'home') {
                gameState.homeLineup[index].position = position;
            } else {
                gameState.visitorLineup[index].position = position;
            }
        }

        // Add player
        function addPlayer(team) {
            const lineup = team === 'home' ? gameState.homeLineup : gameState.visitorLineup;
            const newPlayerNumber = lineup.length + 1;
            
            lineup.push({
                name: `Player ${newPlayerNumber}`,
                position: 'P'
            });
            
            renderLineups();
        }

        // Delete player
        function deletePlayer(team, index) {
            const lineup = team === 'home' ? gameState.homeLineup : gameState.visitorLineup;
            
            // Prevent deleting if only one player left
            if (lineup.length <= 1) {
                alert('You must have at least one player in the lineup!');
                return;
            }
            
            if (confirm(`Delete ${lineup[index].name}?`)) {
                lineup.splice(index, 1);
                
                // Adjust current batter index if needed
                if (gameState.currentBatter[team] >= lineup.length) {
                    gameState.currentBatter[team] = lineup.length - 1;
                } else if (gameState.currentBatter[team] > index) {
                    gameState.currentBatter[team]--;
                }
                
                renderLineups();
            }
        }

        // Update current batter highlight
        function updateCurrentBatter() {
            // Remove all highlights
            document.querySelectorAll('.player-row').forEach(row => {
                row.classList.remove('current-batter');
            });

            // Add highlight to current batter
            const currentTeam = gameState.isTop ? 'visitor' : 'home';
            const currentIndex = gameState.currentBatter[currentTeam];
            const currentRow = document.getElementById(`${currentTeam}-batter-${currentIndex}`);
            if (currentRow) {
                currentRow.classList.add('current-batter');
            }
        }

        // Adjust score
        function adjustScore(team, change) {
            if (team === 'home') {
                gameState.homeScore = Math.max(0, gameState.homeScore + change);
                document.getElementById('homeScore').textContent = gameState.homeScore;
            } else {
                gameState.visitorScore = Math.max(0, gameState.visitorScore + change);
                document.getElementById('visitorScore').textContent = gameState.visitorScore;
            }
        }

        // Add strike
        function addStrike() {
            gameState.strikes++;
            if (gameState.strikes >= 3) {
                addOut();
            } else {
                updateIndicators();
            }
        }

        // Add ball
        function addBall() {
            gameState.balls++;
            if (gameState.balls >= 4) {
                // Walk - reset count and move to next batter
                resetCount();
                nextBatter();
            } else {
                updateIndicators();
            }
        }

        // Add out
        function addOut() {
            gameState.outs++;
            if (gameState.outs >= 3) {
                changeInning();
            } else {
                resetCount();
                nextBatter();
            }
            updateIndicators();
        }

        // Next batter
        function nextBatter() {
            const team = gameState.isTop ? 'visitor' : 'home';
            gameState.currentBatter[team] = (gameState.currentBatter[team] + 1) % 9;
            resetCount();
            updateCurrentBatter();
        }

        // Change inning
        function changeInning() {
            if (!gameState.isTop) {
                gameState.inning++;
            }
            gameState.isTop = !gameState.isTop;
            gameState.outs = 0;
            resetCount();
            updateInningDisplay();
            updateIndicators();
        }

        // Reset count
        function resetCount() {
            gameState.strikes = 0;
            gameState.balls = 0;
            updateIndicators();
        }

        // Update indicators
        function updateIndicators() {
            // Update outs
            for (let i = 1; i <= 3; i++) {
                const indicator = document.getElementById(`out${i}`);
                indicator.classList.toggle('active', i <= gameState.outs);
            }
            document.getElementById('outsCount').textContent = gameState.outs;

            // Update strikes
            for (let i = 1; i <= 3; i++) {
                const indicator = document.getElementById(`strike${i}`);
                indicator.classList.toggle('active', i <= gameState.strikes);
            }
            document.getElementById('strikesCount').textContent = gameState.strikes;

            // Update balls
            for (let i = 1; i <= 4; i++) {
                const indicator = document.getElementById(`ball${i}`);
                indicator.classList.toggle('active', i <= gameState.balls);
            }
            document.getElementById('ballsCount').textContent = gameState.balls;
        }

        // Update inning display
        function updateInningDisplay() {
            const half = gameState.isTop ? 'Top' : 'Bottom';
            document.getElementById('inningDisplay').textContent = `Inning ${gameState.inning} - ${half}`;
        }

        // Drag and drop handlers
        function handleDragStart(e) {
            draggedElement = this;
            draggedTeam = this.dataset.team;
            draggedIndex = parseInt(this.dataset.index);
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            // Only highlight if dragging over same team
            if (this.dataset.team === draggedTeam && this !== draggedElement) {
                this.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }

            const dropTeam = this.dataset.team;
            const dropIndex = parseInt(this.dataset.index);

            // Only allow drops within the same team
            if (draggedTeam === dropTeam && draggedIndex !== dropIndex) {
                // Get the lineup array
                const lineup = dropTeam === 'home' ? gameState.homeLineup : gameState.visitorLineup;
                
                // Remove the dragged player
                const [draggedPlayer] = lineup.splice(draggedIndex, 1);
                
                // Insert at new position
                lineup.splice(dropIndex, 0, draggedPlayer);
                
                // Re-render the lineup
                renderLineups();
            }

            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            
            // Remove all drag-over classes
            document.querySelectorAll('.drag-over').forEach(el => {
                el.classList.remove('drag-over');
            });

            draggedElement = null;
            draggedTeam = null;
            draggedIndex = null;
        }

        // Reset game
        function resetGame() {
            if (confirm('Are you sure you want to start a new game? This will reset all scores and counts.')) {
                gameState = {
                    homeScore: 0,
                    visitorScore: 0,
                    outs: 0,
                    strikes: 0,
                    balls: 0,
                    inning: 1,
                    isTop: true,
                    currentBatter: {
                        home: 0,
                        visitor: 0
                    },
                    homeLineup: gameState.homeLineup,
                    visitorLineup: gameState.visitorLineup,
                    teamNames: gameState.teamNames
                };
                document.getElementById('homeScore').textContent = 0;
                document.getElementById('visitorScore').textContent = 0;
                updateInningDisplay();
                updateIndicators();
                updateCurrentBatter();
            }
        }

        // Initialize on load
        window.onload = function() {
            initializeLineups();
            updateInningDisplay();
            updateIndicators();
        };
    </script>
</body>
</html>
